<!DOCTYPE html>
<html>
<head>
	<link href={{ url_for('static', filename='../styles/view21.css') }} rel="stylesheet"/>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	
{% for key,value in data.items() %}
	<!-- <script src="{{url_for('static', filename='view3.js')}}"></script> -->
<script>
$(document).ready(function() { 
		$('[name=hi2]').on('submit',function(event) { 
			$.ajax({
			data : {
				userid : $('form > input[name=id11]').val(),
				count1 : $('form > input[name=count11]').val(),
				postid : $('form > input[name=post11]').val()
			},
			type : 'POST',
			url : '/vote'
		})
		.done(function(data) {

			if (data.error) {
				alert("You have alreday voted.")
			}
			else {
				$('[name=vote11]').text(data.count);
			}
		});

		event.preventDefault();
	}); 
}); 
</script>


<!-- <style> -->
<!-- table { -->
  <!-- font-family: arial, sans-serif; -->
  <!-- border-collapse: collapse; -->
  <!-- width: 100%; -->
<!-- } -->

<!-- td, th { -->
  <!-- border: 1px solid #dddddd; -->
  <!-- text-align: left; -->
  <!-- padding: 8px; -->
  <!-- width: 50%; -->
<!-- } -->

<!-- tr:nth-child(even) { -->
  <!-- background-color: #dddddd; -->
<!-- } -->
<!-- </style> -->
{% endfor %}
</head>
<body>
<br>
<h2>Profile Page</h2>
<a href="/{{hashedcode}}/create">Create New post</a>
<br><br>

<table>
  <tr>
	<th>Title</th>
    <th>Content</th>
	<th>Vote Count</th>
	<th>Vote</th>
  </tr>
{% for key,value in data.items() %}
  
  <tr>
    <td><a href="/posts/{{key[1]}}/{{hashedcode}}">{{key[0]}}</td>
    <td>{{value[0]}}</td>
	<td id='vote00{{key[1]}}' name='vote11'>{{value[1]}}</td>
	<td><form id='hi1{{key[1]}}' name='hi2' class="form-inline">
		<input type="hidden" id="id11{{key[1]}}" name="id11" value={{hashedcode}}>
		<input type="hidden" id="post11{{key[1]}}" name="post11" value={{key[1]}}>
		<input type="hidden" id="count11{{key[1]}}" name="count11" value=1>
		<button type="submit">Upvote</button></form>
		<!-- <button type="submit" onclick="tell1('{{key[1]}}')">Upvote</button> -->
		<form id='hi2{{key[1]}}' name='hi2' class="form-inline">
		<input type="hidden" id="id22{{key[1]}}" name="id11" value={{hashedcode}}>
		<input type="hidden" id="post22{{key[1]}}" name="post11" value={{key[1]}}>
		<input type="hidden" id="count22{{key[1]}}" name="count11" value=-1>
		<button type="submit">Downvote</button>
		<!-- <button type="submit" onclick="tell1('{{key[1]}}')">Downvote</button> -->
	</form></td>
	<!-- <td><a href="/posts/{{key[1]}}">VIEW</a></td> -->
  </tr>
{% endfor %}
</table>

</body>
</html>
